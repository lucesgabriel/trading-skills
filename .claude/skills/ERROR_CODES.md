# Error Codes Reference

Sistema de c√≥digos de error estructurados para todos los skills del proyecto trading-skills.

## üìã Formato de C√≥digo

```
ERR_[SKILL]_[NUMBER]: [Description]
```

**Convenci√≥n:**
- **ERR_PS_xxx** - Pattern Scanner
- **ERR_TA_xxx** - Technical Analysis
- **ERR_OS_xxx** - Opportunity Scanner
- **ERR_RM_xxx** - Risk Management
- **ERR_BT_xxx** - Backtesting
- **ERR_AA_xxx** - Advanced Analytics
- **ERR_GEN_xxx** - General Errors

---

## üîç Pattern Scanner (ERR_PS_xxx)

### ERR_PS_001: Insufficient Candle Data
**Causa:** MCP retorn√≥ menos de 50 velas para un timeframe

**Razones comunes:**
- MetaTrader no tiene suficiente historia descargada
- Broker limita datos hist√≥ricos
- S√≠mbolo reci√©n a√±adido al servidor

**Soluci√≥n:**
1. Verificar que MetaTrader 5 est√© conectado
2. Ir a Tools ‚Üí History Center en MetaTrader
3. Seleccionar s√≠mbolo y descargar m√°s historia
4. Reiniciar el scan despu√©s de descargar

**Mensaje al usuario:**
```
‚ùå ERR_PS_001: Datos insuficientes para M15 (solo 30 velas, se requieren 50+)
üìä Detalles: Pattern scanner necesita m√≠nimo 50 velas para an√°lisis confiable
üí° Soluci√≥n:
   1. Abre MetaTrader 5
   2. Tools ‚Üí History Center
   3. Selecciona EURUSD ‚Üí M15
   4. Click "Download" para obtener m√°s historia
   5. Reintenta el scan
üîó M√°s info: .claude/skills/pattern-scanner/troubleshooting.md
```

---

### ERR_PS_002: Invalid Symbol
**Causa:** S√≠mbolo no disponible en el broker

**Razones comunes:**
- Typo en el nombre del s√≠mbolo (EURUSDD en vez de EURUSD)
- Broker no soporta ese s√≠mbolo
- S√≠mbolo escrito con formato incorrecto (EUR/USD vs EURUSD)

**Soluci√≥n:**
1. Verificar spelling del s√≠mbolo
2. Confirmar que broker soporta el s√≠mbolo
3. Ver s√≠mbolos disponibles con `mcp__metatrader__get_all_symbols`
4. Usar formato correcto seg√∫n broker

**Mensaje al usuario:**
```
‚ùå ERR_PS_002: S√≠mbolo 'EURUSDD' no encontrado en broker
üìä Detalles: El s√≠mbolo solicitado no existe en tu servidor MetaTrader
üí° Soluci√≥n:
   ¬øQuisiste decir 'EURUSD'?

   S√≠mbolos disponibles que coinciden:
   - EURUSD
   - EURUSD.raw
   - EURUSD_i

   Para ver todos: Usa "get all available symbols"
üîó M√°s info: .claude/skills/pattern-scanner/troubleshooting.md
```

---

### ERR_PS_003: MCP Connection Failed
**Causa:** MetaTrader no est√° ejecut√°ndose o MCP server no responde

**Razones comunes:**
- MetaTrader 5 cerrado
- MCP server no iniciado
- Configuraci√≥n incorrecta en `.claude/settings.local.json`
- Firewall bloqueando conexi√≥n

**Soluci√≥n:**
1. Verificar que MetaTrader 5 est√© abierto
2. Verificar que MCP server est√© corriendo
3. Reiniciar Claude Code
4. Verificar configuraci√≥n MCP en settings

**Mensaje al usuario:**
```
‚ùå ERR_PS_003: No se puede conectar a MetaTrader via MCP
üìä Detalles: El servidor MCP de MetaTrader no responde
üí° Soluci√≥n:
   1. Verifica que MetaTrader 5 est√© abierto
   2. Reinicia Claude Code (cierra y abre de nuevo)
   3. Verifica configuraci√≥n en .claude/settings.local.json:
      - Debe tener "metatrader" en mcpServers
      - Command debe apuntar a Python correcto
   4. Si persiste: Revisa logs en MetaTrader (Tools ‚Üí Options ‚Üí Expert Advisors)
üîó M√°s info: .claude/skills/pattern-scanner/troubleshooting.md
```

---

### ERR_PS_004: No Patterns Detected
**Causa:** No se detectaron patrones de velas en los timeframes analizados

**Razones comunes:**
- Mercado en consolidaci√≥n (sin patrones claros)
- Timeframes seleccionados no muestran formaciones
- Par√°metros de detecci√≥n demasiado estrictos

**Soluci√≥n:**
1. Probar con diferentes timeframes
2. Esperar a que se forme un patr√≥n
3. Analizar otros s√≠mbolos

**Mensaje al usuario:**
```
‚ö†Ô∏è ERR_PS_004: No se detectaron patrones en EURUSD
üìä Detalles: Ning√∫n patr√≥n de velas encontrado en M15, H1, H4, D1
üí° Soluci√≥n:
   Esto es normal cuando el mercado est√° en consolidaci√≥n.

   Opciones:
   1. Espera y reintenta en 1-2 horas
   2. Analiza otro s√≠mbolo: /scan GBPUSD
   3. Usa /analyze EURUSD para ver indicadores t√©cnicos
üîó M√°s info: Esto no es un error, solo ausencia de se√±ales
```

---

### ERR_PS_005: Pattern Detection Failed
**Causa:** Error durante el proceso de detecci√≥n de patrones

**Razones comunes:**
- Datos corruptos en velas
- Error en script de Python
- Par√°metros inv√°lidos

**Soluci√≥n:**
1. Reintentar el scan
2. Verificar logs de Python
3. Reportar bug si persiste

**Mensaje al usuario:**
```
‚ùå ERR_PS_005: Error inesperado al detectar patrones
üìä Detalles: El algoritmo de detecci√≥n encontr√≥ un problema
üí° Soluci√≥n:
   1. Reintenta el comando: /scan EURUSD
   2. Si persiste, intenta con otro s√≠mbolo
   3. Reporta el error con detalles:
      - S√≠mbolo afectado
      - Mensaje de error completo
üîó M√°s info: GitHub Issues: https://github.com/lucesgabriel/trading-skills/issues
```

---

## üìä Technical Analysis (ERR_TA_xxx)

### ERR_TA_001: Indicator Calculation Failed
**Causa:** Datos insuficientes para calcular indicador

**Razones comunes:**
- MACD requiere m√≠nimo 34 velas (26 + 12 - 1)
- RSI requiere m√≠nimo 14 velas
- MA 200 requiere m√≠nimo 200 velas
- Timeframe muy bajo con poca historia

**Soluci√≥n:**
1. Usar timeframe mayor (H4/D1 en vez de M15)
2. Reducir periodo del indicador
3. Descargar m√°s historia

**Mensaje al usuario:**
```
‚ùå ERR_TA_001: No se puede calcular MA200 (solo 100 velas disponibles)
üìä Detalles: Moving Average de 200 periodos requiere m√≠nimo 200 velas
üí° Soluci√≥n:
   Opciones:
   1. Usa timeframe mayor: /analyze EURUSD (en H4 o D1)
   2. Reduce periodo: Usa MA50 o MA100 en vez de MA200
   3. Descarga m√°s historia en MetaTrader

   Indicadores disponibles con 100 velas:
   ‚úÖ MA50
   ‚úÖ RSI (14)
   ‚úÖ MACD (12,26,9)
   ‚ùå MA200
üîó M√°s info: .claude/skills/technical-analysis/troubleshooting.md
```

---

### ERR_TA_002: Invalid Timeframe
**Causa:** Timeframe solicitado no es v√°lido

**Razones comunes:**
- Formato incorrecto (M1 vs 1M)
- Timeframe no soportado por broker

**Soluci√≥n:**
1. Usar timeframes v√°lidos: M1, M5, M15, M30, H1, H4, D1, W1, MN1
2. Verificar formato correcto

**Mensaje al usuario:**
```
‚ùå ERR_TA_002: Timeframe '5M' no es v√°lido
üìä Detalles: Formato de timeframe incorrecto
üí° Soluci√≥n:
   Usa el formato correcto:
   ‚úÖ M5  (5 minutos)
   ‚úÖ M15 (15 minutos)
   ‚úÖ H1  (1 hora)
   ‚úÖ H4  (4 horas)
   ‚úÖ D1  (diario)

   ‚ùå 5M, 15m, 1h (formatos incorrectos)
üîó M√°s info: .claude/skills/technical-analysis/troubleshooting.md
```

---

### ERR_TA_003: Conflicting Signals
**Causa:** Indicadores muestran se√±ales contradictorias

**Razones comunes:**
- Mercado en consolidaci√≥n
- Reversi√≥n de tendencia en progreso
- Divergencias normales entre indicadores

**Soluci√≥n:**
1. Esperar confirmaci√≥n
2. Analizar timeframe mayor
3. Buscar confluencia con patterns

**Mensaje al usuario:**
```
‚ö†Ô∏è ERR_TA_003: Se√±ales contradictorias detectadas en EURUSD
üìä Detalles:
   - RSI: Oversold (28) ‚Üí Se√±al de compra
   - MACD: Bearish crossover ‚Üí Se√±al de venta
   - MA: Precio bajo MA200 ‚Üí Tendencia bajista

üí° Interpretaci√≥n:
   Esto indica indecisi√≥n del mercado o posible reversi√≥n.

   Recomendaci√≥n:
   1. NO operar hasta tener confirmaci√≥n
   2. Espera a que MACD confirme reversi√≥n
   3. Usa /scan EURUSD para buscar patrones de reversi√≥n
   4. Analiza timeframe mayor: /analyze EURUSD (en D1)
üîó M√°s info: No es un error, es informaci√≥n importante
```

---

## üéØ Opportunity Scanner (ERR_OS_xxx)

### ERR_OS_001: No Symbols Available
**Causa:** No hay s√≠mbolos disponibles para escanear

**Razones comunes:**
- MetaTrader desconectado
- Filtro de s√≠mbolos demasiado restrictivo

**Soluci√≥n:**
1. Verificar conexi√≥n a MetaTrader
2. Ajustar filtros de b√∫squeda

**Mensaje al usuario:**
```
‚ùå ERR_OS_001: No se encontraron s√≠mbolos para escanear
üìä Detalles: La lista de s√≠mbolos est√° vac√≠a
üí° Soluci√≥n:
   1. Verifica que MetaTrader est√© conectado
   2. Si usaste filtros, prueba sin filtrar:
      /opportunities (sin filtros)
   3. Verifica s√≠mbolos disponibles: "get all available symbols"
üîó M√°s info: .claude/skills/opportunity-scanner/troubleshooting.md
```

---

### ERR_OS_002: Scan Timeout
**Causa:** El escaneo tard√≥ m√°s de lo esperado

**Razones comunes:**
- Demasiados s√≠mbolos para analizar
- Servidor lento
- Conexi√≥n inestable

**Soluci√≥n:**
1. Reducir n√∫mero de s√≠mbolos
2. Escanear por categor√≠as (solo forex mayor, solo metales, etc.)
3. Verificar conexi√≥n a internet

**Mensaje al usuario:**
```
‚ùå ERR_OS_002: Escaneo cancelado por timeout (> 2 minutos)
üìä Detalles: El escaneo de 50 s√≠mbolos tard√≥ demasiado
üí° Soluci√≥n:
   Reduce el alcance del escaneo:

   En vez de: /opportunities (todos los s√≠mbolos)
   Usa: /opportunities forex (solo pares forex)
   O: /opportunities majors (solo pares principales)

   S√≠mbolos principales:
   - EURUSD, GBPUSD, USDJPY, USDCHF
   - AUDUSD, NZDUSD, USDCAD
   - XAUUSD (oro)
üîó M√°s info: .claude/skills/opportunity-scanner/troubleshooting.md
```

---

### ERR_OS_003: No Opportunities Found
**Causa:** No se encontraron oportunidades de trading con alta probabilidad

**Razones comunes:**
- Mercado en consolidaci√≥n general
- Criterios de selecci√≥n muy estrictos
- Momento del d√≠a (poco movimiento)

**Soluci√≥n:**
1. Normal cuando mercado est√° tranquilo
2. Esperar a sesiones m√°s activas
3. Reducir threshold de probabilidad

**Mensaje al usuario:**
```
‚ö†Ô∏è ERR_OS_003: No se encontraron oportunidades de alta probabilidad
üìä Detalles: Ning√∫n s√≠mbolo cumple criterios (probabilidad > 65%)
üí° Interpretaci√≥n:
   Esto es normal cuando el mercado est√° en consolidaci√≥n.

   Opciones:
   1. Espera a sesiones m√°s activas:
      - London open: 8:00 GMT
      - NY open: 13:00 GMT
      - London/NY overlap: 13:00-17:00 GMT

   2. Revisa s√≠mbolos manualmente:
      /analyze EURUSD
      /scan GBPUSD

   3. Reduce threshold: "find opportunities with 50%+ probability"
üîó M√°s info: No es un error, es informaci√≥n del mercado
```

---

## üí∞ Risk Management (ERR_RM_xxx)

### ERR_RM_001: Insufficient Account Balance
**Causa:** Balance muy bajo para el riesgo solicitado

**Razones comunes:**
- Intentar arriesgar m√°s del 2% recomendado
- Lot size demasiado grande para la cuenta
- Stop loss muy amplio para el capital disponible

**Soluci√≥n:**
1. Reducir lot size
2. Aumentar stop loss (menor riesgo por pip)
3. Reducir porcentaje de riesgo
4. Depositar m√°s fondos

**Mensaje al usuario:**
```
‚ùå ERR_RM_001: Riesgo de $500 excede l√≠mite recomendado
üìä Detalles:
   - Balance: $1,000
   - Riesgo solicitado: $500 (50%)
   - M√°ximo recomendado: $20 (2%)

üí° Soluci√≥n:
   Nunca arriesgues m√°s del 2% por trade.

   Para este trade:
   - Entry: 1.0850
   - Stop: 1.0820 (30 pips)
   - Balance: $1,000

   C√°lculo correcto:
   - Riesgo m√°ximo: $20 (2% de $1,000)
   - Position size: 0.067 lots
   - Riesgo por pip: $0.67

   Comando correcto:
   /risk EURUSD entry:1.0850 stop:1.0820 risk:2%
üîó M√°s info: .claude/skills/risk-management/SKILL.md
```

---

### ERR_RM_002: Risk:Reward Too Low
**Causa:** R:R ratio menor al m√≠nimo recomendado (1:1.5)

**Razones comunes:**
- Take profit muy cercano
- Stop loss muy amplio
- Setup no favorable

**Soluci√≥n:**
1. Ampliar take profit
2. Reducir stop loss (si es t√©cnicamente v√°lido)
3. Buscar otro setup mejor

**Mensaje al usuario:**
```
‚ö†Ô∏è ERR_RM_002: Risk:Reward de 1:0.8 es muy bajo
üìä Detalles:
   - Entry: 1.0850
   - Stop loss: 1.0820 (30 pips de riesgo)
   - Take profit: 1.0874 (24 pips de ganancia)
   - R:R actual: 1:0.8
   - R:R m√≠nimo: 1:1.5

üí° Soluci√≥n:
   Ajustar take profit para mejor R:R:

   Opciones:
   1. TP conservador 1:1.5 ‚Üí 1.0895 (45 pips)
   2. TP ideal 1:2 ‚Üí 1.0910 (60 pips)
   3. TP agresivo 1:3 ‚Üí 1.0940 (90 pips)

   Recomendaci√≥n:
   Usa m√≠nimo 1:2 para compensar trades perdedores.
   Con 50% win rate y R:R 1:2, eres rentable.
üîó M√°s info: .claude/skills/risk-management/SKILL.md
```

---

### ERR_RM_003: Invalid Stop Loss
**Causa:** Stop loss no es v√°lido

**Razones comunes:**
- Stop loss demasiado cercano (< 10 pips)
- Stop loss en direcci√≥n incorrecta (buy con SL arriba del entry)
- Stop loss = entry price

**Soluci√≥n:**
1. Colocar stop loss en nivel t√©cnico v√°lido
2. M√≠nimo 10-15 pips de distancia
3. Verificar direcci√≥n del trade

**Mensaje al usuario:**
```
‚ùå ERR_RM_003: Stop loss inv√°lido
üìä Detalles:
   - Entry: 1.0850
   - Stop loss: 1.0849 (solo 1 pip)
   - Tipo de trade: BUY

üí° Problema:
   Stop loss de 1 pip es demasiado cercano.
   Ser√° activado por ruido normal del mercado.

   Soluci√≥n:
   Coloca stop loss en nivel t√©cnico:
   - Debajo de soporte reciente
   - Debajo de swing low
   - M√≠nimo 15-20 pips de distancia

   Ejemplo:
   Si √∫ltimo swing low es 1.0820:
   /risk EURUSD entry:1.0850 stop:1.0815
üîó M√°s info: .claude/skills/risk-management/SKILL.md
```

---

## üìà Backtesting (ERR_BT_xxx)

### ERR_BT_001: Insufficient Historical Data
**Causa:** No hay suficientes velas para backtest significativo

**Razones comunes:**
- Periodo de prueba muy corto
- Estrategia genera pocos trades
- Timeframe muy alto (W1, MN1)

**Soluci√≥n:**
1. Descargar m√°s historia
2. Usar timeframe menor
3. Extender periodo de prueba

**Mensaje al usuario:**
```
‚ùå ERR_BT_001: Solo 50 trades encontrados (m√≠nimo: 100 para significancia estad√≠stica)
üìä Detalles:
   - Periodo: 3 meses
   - Timeframe: D1
   - Trades: 50
   - M√≠nimo recomendado: 100

üí° Soluci√≥n:
   Opciones para obtener m√°s trades:

   1. Extender periodo:
      3 meses ‚Üí 6-12 meses

   2. Usar timeframe menor:
      D1 ‚Üí H4 (m√°s se√±ales)

   3. Relajar filtros de estrategia:
      Si es muy restrictiva, menos trades

   Ejemplo:
   /backtest "Bullish Engulfing + RSI < 30" period:12months timeframe:H4
üîó M√°s info: .claude/skills/backtesting/troubleshooting.md
```

---

### ERR_BT_002: Strategy Undefined
**Causa:** Reglas de estrategia no est√°n claras

**Razones comunes:**
- Descripci√≥n muy vaga
- Faltan condiciones de entrada/salida
- Reglas ambiguas

**Soluci√≥n:**
1. Definir condiciones de entrada espec√≠ficas
2. Especificar reglas de salida claras
3. Incluir filtros si aplican

**Mensaje al usuario:**
```
‚ùå ERR_BT_002: Estrategia "comprar cuando sube" es muy vaga
üìä Detalles: La descripci√≥n no tiene reglas espec√≠ficas para backtesting
üí° Soluci√≥n:
   Define una estrategia clara con:

   1. Condici√≥n de entrada exacta
   2. Stop loss
   3. Take profit
   4. Filtros opcionales

   Ejemplos MALOS (muy vagos):
   ‚ùå "comprar cuando sube"
   ‚ùå "usar RSI para operar"
   ‚ùå "trade breakouts"

   Ejemplos BUENOS (espec√≠ficos):
   ‚úÖ "Buy when RSI < 30 AND Bullish Engulfing appears on H4"
   ‚úÖ "Sell when MACD bearish crossover AND price > MA200"
   ‚úÖ "Buy when price breaks above resistance with volume increase"

   Template recomendado:
   "BUY/SELL when [indicator condition] AND [pattern] on [timeframe]"
üîó M√°s info: .claude/skills/backtesting/SKILL.md
```

---

### ERR_BT_003: Strategy Performance Poor
**Causa:** La estrategia testeada tiene mal desempe√±o

**Razones comunes:**
- Win rate < 40%
- Profit factor < 1.0 (perdedor neto)
- Max drawdown > 30%

**Soluci√≥n:**
1. NO operar esta estrategia
2. Optimizar par√°metros
3. Buscar otra estrategia

**Mensaje al usuario:**
```
‚ö†Ô∏è ERR_BT_003: Estrategia muestra desempe√±o pobre
üìä Resultados del backtest:
   - Win rate: 38% (bajo, m√≠nimo 50%)
   - Profit factor: 0.85 (perdedor neto, m√≠nimo 1.5)
   - Max drawdown: 35% (muy alto, m√°ximo 20%)
   - Trades: 150

üí° Interpretaci√≥n:
   ‚ùå NO operes esta estrategia con dinero real

   Esta estrategia pierde dinero en promedio.

   Opciones:
   1. Optimiza par√°metros:
      - Ajusta niveles de RSI
      - Cambia timeframe
      - A√±ade filtros de tendencia

   2. Prueba estrategia diferente:
      /backtest "Buy when price bounces off MA200 with RSI < 35"

   3. Analiza por qu√© falla:
      - ¬øMuchos falsos breakouts?
      - ¬øStop loss muy cercano?
      - ¬øTake profit muy lejano?
üîó M√°s info: .claude/skills/backtesting/SKILL.md
```

---

## üìâ Advanced Analytics (ERR_AA_xxx)

### ERR_AA_001: No Trade History
**Causa:** No hay trades para analizar

**Razones comunes:**
- Cuenta nueva sin historial
- Periodo de an√°lisis sin trades
- Filtros muy restrictivos

**Soluci√≥n:**
1. Ejecutar algunos trades primero
2. Importar historial de MetaTrader
3. Ajustar periodo de an√°lisis

**Mensaje al usuario:**
```
‚ùå ERR_AA_001: No hay trades para calcular Sharpe ratio
üìä Detalles: El historial de trading est√° vac√≠o
üí° Soluci√≥n:
   Para calcular m√©tricas necesitas historial de trades.

   Opciones:
   1. Si eres nuevo:
      - Ejecuta al menos 10-20 trades en demo
      - Documenta resultados
      - Luego usa analytics para revisar desempe√±o

   2. Si tienes historial en MetaTrader:
      - Importa deals: "get deals from last 3 months"
      - Luego: "calculate Sharpe ratio from imported data"

   3. Si no tienes trades a√∫n:
      - Comienza con backtesting: /backtest
      - Luego opera en demo
      - Finalmente usa analytics
üîó M√°s info: .claude/skills/advanced-analytics/SKILL.md
```

---

### ERR_AA_002: Insufficient Sample Size
**Causa:** Muy pocos trades para an√°lisis estad√≠stico significativo

**Razones comunes:**
- Menos de 20 trades
- Periodo muy corto
- Estrategia genera pocas se√±ales

**Soluci√≥n:**
1. Esperar m√°s trades
2. Extender periodo de an√°lisis
3. Usar con precauci√≥n

**Mensaje al usuario:**
```
‚ö†Ô∏è ERR_AA_002: Solo 8 trades (m√≠nimo 20 para significancia estad√≠stica)
üìä Detalles:
   - Trades analizados: 8
   - M√≠nimo recomendado: 20
   - Ideal: 50+

üí° Interpretaci√≥n:
   Puedo calcular las m√©tricas, pero no son muy confiables.

   Con 8 trades:
   ‚úÖ Puedo calcular: Win rate b√°sico, avg R:R
   ‚ö†Ô∏è Poco confiable: Sharpe ratio, Sortino, estad√≠sticas avanzadas
   ‚ùå No recomendado: Tomar decisiones importantes basado en esto

   Recomendaci√≥n:
   1. Opera al menos 20 trades m√°s
   2. Luego repite el an√°lisis
   3. Decisiones importantes requieren 50+ trades
üîó M√°s info: .claude/skills/advanced-analytics/SKILL.md
```

---

### ERR_AA_003: Data Quality Issues
**Causa:** Problemas con calidad de datos

**Razones comunes:**
- Trades con datos incompletos
- Precios de entrada/salida faltantes
- Trades duplicados

**Soluci√≥n:**
1. Limpiar datos
2. Revisar importaci√≥n
3. Excluir trades problem√°ticos

**Mensaje al usuario:**
```
‚ö†Ô∏è ERR_AA_003: Problemas de calidad detectados en datos
üìä Detalles:
   - Trades con SL/TP faltante: 5
   - Trades con profit = 0: 2
   - Posibles duplicados: 1

üí° Soluci√≥n:
   Voy a proceder excluyendo trades problem√°ticos.

   Trades v√°lidos para an√°lisis: 43 de 50
   Trades excluidos: 7

   Si necesitas incluir todos:
   1. Revisa historial en MetaTrader
   2. Completa datos faltantes manualmente
   3. Reimporta datos limpios
üîó M√°s info: .claude/skills/advanced-analytics/troubleshooting.md
```

---

## üîß General Errors (ERR_GEN_xxx)

### ERR_GEN_001: Timeout
**Causa:** Operaci√≥n tard√≥ m√°s de 2 minutos

**Razones comunes:**
- Demasiados datos para procesar
- Servidor lento
- Conexi√≥n inestable

**Soluci√≥n:**
1. Reducir cantidad de datos
2. Verificar conexi√≥n a internet
3. Dividir operaci√≥n en partes m√°s peque√±as

**Mensaje al usuario:**
```
‚ùå ERR_GEN_001: Operaci√≥n cancelada por timeout (> 2 minutos)
üìä Detalles: El comando tard√≥ demasiado en completarse
üí° Soluci√≥n:
   Reduce el alcance de la operaci√≥n:

   Si estabas:
   - Escaneando 50 s√≠mbolos ‚Üí Reduce a 10-15
   - Backtesting 2 a√±os ‚Üí Reduce a 6 meses
   - Analizando m√∫ltiples timeframes ‚Üí Analiza uno a la vez

   Ejemplo:
   En vez de: /opportunities (todos)
   Usa: /opportunities majors (solo pares principales)
üîó M√°s info: contacta support si persiste
```

---

### ERR_GEN_002: MCP Server Error
**Causa:** Error general del servidor MCP

**Razones comunes:**
- MCP server crashe√≥
- MetaTrader perdi√≥ conexi√≥n
- Error en configuraci√≥n

**Soluci√≥n:**
1. Reiniciar MetaTrader
2. Reiniciar Claude Code
3. Verificar configuraci√≥n MCP

**Mensaje al usuario:**
```
‚ùå ERR_GEN_002: Error del servidor MCP
üìä Detalles: El servidor MCP encontr√≥ un problema inesperado
üí° Soluci√≥n:
   1. Reinicia MetaTrader 5 completamente
   2. Reinicia Claude Code
   3. Reintenta el comando

   Si el error persiste:
   - Verifica logs en MetaTrader (Tools ‚Üí Options ‚Üí Experts)
   - Revisa configuraci√≥n en .claude/settings.local.json
   - Reporta el error con mensaje completo
üîó M√°s info: .claude/skills/troubleshooting.md
```

---

### ERR_GEN_003: Invalid Parameter
**Causa:** Par√°metro proporcionado no es v√°lido

**Razones comunes:**
- Formato incorrecto
- Valor fuera de rango
- Tipo de dato incorrecto

**Soluci√≥n:**
1. Verificar formato del par√°metro
2. Ver ejemplos en documentaci√≥n
3. Usar valores v√°lidos

**Mensaje al usuario:**
```
‚ùå ERR_GEN_003: Par√°metro 'risk:5%' tiene formato inv√°lido
üìä Detalles: El valor debe ser un n√∫mero sin el s√≠mbolo %
üí° Soluci√≥n:
   Formato correcto:

   ‚ùå risk:5%
   ‚úÖ risk:5

   ‚ùå entry:1.0850.00
   ‚úÖ entry:1.0850

   ‚ùå stop:1.0820pips
   ‚úÖ stop:1.0820

   Ejemplo completo:
   /risk EURUSD entry:1.0850 stop:1.0820 risk:2
üîó M√°s info: Ver documentaci√≥n del comando espec√≠fico
```

---

## üé® Template de Mensajes de Error

Formato est√°ndar para todos los errores:

```
‚ùå [ERROR_CODE]: [Descripci√≥n breve del error]
üìä Detalles: [Informaci√≥n espec√≠fica del contexto]
üí° Soluci√≥n: [Pasos concretos y accionables]
üîó M√°s info: [Link a documentaci√≥n relevante]
```

**Ejemplo de implementaci√≥n en c√≥digo:**

```python
class TradingError(Exception):
    def __init__(self, code, description, details, solution, docs_link):
        self.code = code
        self.description = description
        self.details = details
        self.solution = solution
        self.docs_link = docs_link

    def format_message(self):
        return f"""
‚ùå {self.code}: {self.description}
üìä Detalles: {self.details}
üí° Soluci√≥n: {self.solution}
üîó M√°s info: {self.docs_link}
"""

# Uso
raise TradingError(
    code="ERR_PS_001",
    description="Datos insuficientes para M15",
    details=f"Solo {len(candles)} velas disponibles (se requieren 50+)",
    solution="Descarga m√°s historia en MetaTrader (Tools ‚Üí History Center)",
    docs_link=".claude/skills/pattern-scanner/troubleshooting.md"
)
```

---

## üìù Implementaci√≥n en Skills

### Ejemplo: pattern-scanner

```python
# En scripts/run_scan.py

def validate_candle_data(symbol, timeframe, candles):
    """Validate that we have enough candles for pattern detection"""

    MIN_CANDLES = 50

    if len(candles) < MIN_CANDLES:
        raise InsufficientDataError(
            code="ERR_PS_001",
            description=f"Datos insuficientes para {timeframe}",
            details=f"Solo {len(candles)} velas disponibles (se requieren {MIN_CANDLES}+)",
            solution=f"""
1. Abre MetaTrader 5
2. Tools ‚Üí History Center
3. Selecciona {symbol} ‚Üí {timeframe}
4. Click "Download" para obtener m√°s historia
5. Reintenta el scan
            """,
            docs_link=".claude/skills/pattern-scanner/troubleshooting.md"
        )

    return True

def validate_symbol(symbol, available_symbols):
    """Validate that symbol exists in broker"""

    if symbol not in available_symbols:
        # Find similar symbols
        similar = [s for s in available_symbols if symbol[:3] in s]

        suggestion = f"\n¬øQuisiste decir '{similar[0]}'?" if similar else ""
        symbol_list = "\n".join(similar[:5]) if similar else "Use 'get all symbols'"

        raise InvalidSymbolError(
            code="ERR_PS_002",
            description=f"S√≠mbolo '{symbol}' no encontrado",
            details=f"El s√≠mbolo solicitado no existe en tu broker{suggestion}",
            solution=f"""
S√≠mbolos disponibles que coinciden:
{symbol_list}

Para ver todos: "get all available symbols"
            """,
            docs_link=".claude/skills/pattern-scanner/troubleshooting.md"
        )
```

### Ejemplo: risk-management

```python
# En risk calculation script

def validate_risk_parameters(balance, risk_pct, entry, stop):
    """Validate risk management parameters"""

    MAX_RISK_PCT = 2.0
    MIN_STOP_DISTANCE_PIPS = 10

    # Check risk percentage
    if risk_pct > MAX_RISK_PCT:
        risk_amount = balance * (risk_pct / 100)
        max_amount = balance * (MAX_RISK_PCT / 100)

        raise ExcessiveRiskError(
            code="ERR_RM_001",
            description=f"Riesgo de ${risk_amount:.2f} excede l√≠mite",
            details=f"""
Balance: ${balance:,.2f}
Riesgo solicitado: ${risk_amount:.2f} ({risk_pct}%)
M√°ximo recomendado: ${max_amount:.2f} ({MAX_RISK_PCT}%)
            """,
            solution=f"""
Nunca arriesgues m√°s del {MAX_RISK_PCT}% por trade.

Comando correcto:
/risk SYMBOL entry:{entry} stop:{stop} risk:{MAX_RISK_PCT}
            """,
            docs_link=".claude/skills/risk-management/SKILL.md"
        )

    # Check stop loss distance
    stop_distance_pips = abs(entry - stop) * 10000
    if stop_distance_pips < MIN_STOP_DISTANCE_PIPS:
        raise InvalidStopLossError(
            code="ERR_RM_003",
            description="Stop loss demasiado cercano",
            details=f"""
Entry: {entry}
Stop loss: {stop} (solo {stop_distance_pips:.0f} pips)
M√≠nimo: {MIN_STOP_DISTANCE_PIPS} pips
            """,
            solution=f"""
Coloca stop loss en nivel t√©cnico:
- Debajo de soporte reciente
- Debajo de swing low
- M√≠nimo {MIN_STOP_DISTANCE_PIPS} pips de distancia
            """,
            docs_link=".claude/skills/risk-management/SKILL.md"
        )
```

---

## üîç Debugging y Troubleshooting

### C√≥mo Usar los C√≥digos de Error

1. **Usuario ve error** ‚Üí Identifica el c√≥digo (ERR_XX_YYY)
2. **Busca en este documento** ‚Üí Lee descripci√≥n y causa
3. **Sigue soluci√≥n propuesta** ‚Üí Pasos concretos para resolver
4. **Si persiste** ‚Üí Consulta docs_link para m√°s detalles

### Reportar Errores

Si un error persiste despu√©s de seguir las soluciones:

1. Anota el c√≥digo de error completo
2. Copia el mensaje de error
3. Documenta pasos para reproducir
4. Reporta en GitHub Issues con template:

```markdown
## Error Report

**Error Code:** ERR_PS_001

**Descripci√≥n:**
[Copia el mensaje de error completo]

**Pasos para reproducir:**
1. /scan EURUSD
2. [describe qu√© hiciste]

**Configuraci√≥n:**
- OS: Windows 11
- Claude Code version: 1.x
- MetaTrader 5 build: XXXX
- Broker: [nombre]

**Logs:**
[Pega logs relevantes si est√°n disponibles]
```

---

## üìö Referencias

- **Pattern Scanner:** `.claude/skills/pattern-scanner/troubleshooting.md`
- **Technical Analysis:** `.claude/skills/technical-analysis/troubleshooting.md`
- **Risk Management:** `.claude/skills/risk-management/SKILL.md`
- **Backtesting:** `.claude/skills/backtesting/troubleshooting.md`
- **Advanced Analytics:** `.claude/skills/advanced-analytics/SKILL.md`
- **MCP Configuration:** `.claude/settings.local.json`

---

**√öltima actualizaci√≥n:** 2025-10-30
**Versi√≥n:** 1.0
**Autor:** Trading Skills Project - Phase 2
